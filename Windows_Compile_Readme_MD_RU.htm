<html lang="ru">
<head>
<title>Mashup Dimensions Documentation</title>
  <style type="text/css">
   div {
    font-size: 18px;
    font-family: Verdana, Arial, Helvetica, sans-serif;
    color: #333366;
   }
   .header {
        text-align: center;
        font-size: 22px;
   }
    a {
        text-decoration:none;
        color: #cccccc;
    }
    a:link {
        text-decoration:none;
        color: #cccccc;
    }
    a:visited {
        text-decoration:none;
        color: #cccccc;
    }
    a:hover {
        text-decoration:none;
        color: #ffffff;
    }
    a:active {
        text-decoration:none;
        color: #cccccc;
    }
  </style>
</head>
<body bgcolor=#c0c0c0>
<div align=center>
Руководство по набору разработчика (SDK) Хитросплетённого мира.
</div>
<div align=center>
<svg
   width="320"
   height="240"
   viewBox="0 0 84.666665 63.500002"
   version="1.1"
   id="svg4599"
   xmlns:xlink="http://www.w3.org/1999/xlink"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:dc="http://purl.org/dc/elements/1.1/">
  <defs
     id="defs4593">
    <linearGradient
       id="linearGradient5255">
      <stop
         id="stop5259"
         offset="0"
         style="stop-color:#fe0000;stop-opacity:1" />
      <stop
         id="stop5261"
         offset="1"
         style="stop-color:#c80000;stop-opacity:1" />
    </linearGradient>
    <linearGradient
       xlink:href="#linearGradient5255"
       id="linearGradient5264"
       gradientUnits="userSpaceOnUse"
       x1="100.77097"
       y1="108.58564"
       x2="100.77097"
       y2="174.60748"
       gradientTransform="matrix(0.49313324,0,0,0.55334648,-7.6640587,-49.80924)" />
    <linearGradient
       xlink:href="#linearGradient5255"
       id="linearGradient5266"
       gradientUnits="userSpaceOnUse"
       x1="100.77097"
       y1="108.58564"
       x2="100.77097"
       y2="174.60748"
       gradientTransform="matrix(0.49313324,0,0,0.55334648,-7.6640587,-49.80924)" />
    <linearGradient
       xlink:href="#linearGradient5255"
       id="linearGradient5268"
       gradientUnits="userSpaceOnUse"
       x1="100.77097"
       y1="108.58564"
       x2="100.77097"
       y2="174.60748"
       gradientTransform="matrix(0.49313324,0,0,0.55334648,-7.6640587,-49.80924)" />
    <linearGradient
       xlink:href="#linearGradient5255"
       id="linearGradient5270"
       gradientUnits="userSpaceOnUse"
       x1="100.77097"
       y1="108.58564"
       x2="100.77097"
       y2="174.60748"
       gradientTransform="matrix(0.49313324,0,0,0.55334648,-7.6640587,-49.80924)" />
    <linearGradient
       xlink:href="#linearGradient5255"
       id="linearGradient5272"
       gradientUnits="userSpaceOnUse"
       x1="100.77097"
       y1="108.58564"
       x2="100.77097"
       y2="174.60748"
       gradientTransform="matrix(0.49313324,0,0,0.55334648,-7.6640587,-49.80924)" />
    <linearGradient
       xlink:href="#linearGradient5255"
       id="linearGradient5274"
       gradientUnits="userSpaceOnUse"
       x1="100.77097"
       y1="108.58564"
       x2="100.77097"
       y2="174.60748"
       gradientTransform="matrix(0.49313324,0,0,0.55334648,-7.6640587,-49.80924)" />
  </defs>
  <metadata
     id="metadata4596">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g
     id="layer1">
    <path
       id="path4614-7"
       d="m 26.911772,46.809193 c 2.885806,-9.115367 5.177912,-20.890791 6.523742,-36.9060129 h 3.914246 c 1.957122,6.5128309 2.609497,8.6837709 5.218991,11.9401849 v 7.598296 C 39.194921,28.699249 38.372358,25.697936 36.810463,21.3666 35.505716,35.477726 34.682351,38.759926 32.896219,46.156816 Z"
       style="fill:url(#linearGradient5264);fill-opacity:1;stroke:none;stroke-width:0.168301px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
    <path
       id="path4616-6"
       d="M 31.347916,9.9031801 C 31.58142,12.147449 31.317404,14.31082 30.695542,16.416011 20.909929,13.159605 9.8618945,16.839809 7.862446,24.014306 7.4730435,22.962176 6.5576975,21.843365 6.5576984,18.586951 8.9457387,13.799939 15.690936,8.8177149 31.347916,9.9031801 Z"
       style="fill:url(#linearGradient5266);fill-opacity:1;stroke:none;stroke-width:0.168301px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
    <path
       id="path4618-3"
       d="M 5.2529491,20.757891 C -3.8802886,38.125426 19.298162,46.368913 24.824174,46.809193 26.331906,42.146509 27.43091,38.147435 28.086045,34.869017 19.990582,36.990998 6.5576975,33.783541 5.2529491,20.757891 Z"
       style="fill:url(#linearGradient5268);fill-opacity:1;stroke:none;stroke-width:0.168301px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
    <path
       style="fill:url(#linearGradient5270);fill-opacity:1;stroke:none;stroke-width:0.168301px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 58.208333,46.809193 C 55.322527,37.693826 53.030425,25.918402 51.68459,9.9031801 H 47.770345 C 45.813222,16.416011 45.160852,18.586951 42.551353,21.843365 v 7.598296 c 3.373836,-0.742412 4.43995,-3.743725 6.001846,-8.075061 1.304747,14.111126 1.475735,17.393326 3.261869,24.790216 z"
       id="path4640-0" />
    <path
       style="fill:url(#linearGradient5272);fill-opacity:1;stroke:none;stroke-width:0.168301px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="m 53.772195,9.9031801 c -0.233503,2.2442689 0.03053,4.4076399 0.652372,6.5128309 9.785612,-3.256406 20.833652,0.423798 22.8331,7.598295 0.389403,-1.05213 1.304747,-2.170941 1.304747,-5.427355 C 76.174372,13.799939 69.429175,8.8177149 53.772195,9.9031801 Z"
       id="path4642-3" />
    <path
       style="fill:url(#linearGradient5274);fill-opacity:1;stroke:none;stroke-width:0.168301px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 79.867161,20.757891 C 89.000405,38.125426 65.82195,46.368913 60.295933,46.809193 58.788203,42.146509 57.689202,38.147435 57.034064,34.869017 65.129527,36.990998 78.562414,33.783541 79.867161,20.757891 Z"
       id="path4644-2" />
  </g>
</svg>
</div>
<table bgcolor=#c00000 width=100%>
<tr><td>
<div class="header">
<a href="#desc">Описание</a> | <a href="#cont">Содержание</a> | <a href="#build">Сбор (компиляция)</a>
</div>
</td></tr>
</table>
<div>
<b>Описание.</b><p><a name="desc"></a>
Данное руководство содержит краткие инструкции и описание набора шаблонов и игрового кода, основанного на Q3Min, Quake3e и Open Arena, разрабатываемого и расширяемого для
игры <b>Хитросплетённый Мир</b>. Поскольку код и приложенные шаблоны и прочие материалы основаны на лицензии GPL и Creative Commons, любой желающий имеет право
использовать и изменять его для создания своих проектов.<p>
<b>Содержание.</b><p><a name="cont"></a>
Содержимое набора разложено по папкам. В папке code содержится игровой код модулей клиента (cgame.qvm) сервера (game.qvm) и игрового интерфейса (ui.qvm).
Модули написаны на языке Си. Кодировка файлов - Юникод UTF-8. Советуем начать ознакомление с таблиц строк для интерфейса, содержащей текст для меню игры. Они находятся в
файле code/q3_ui/ui_main.c   файлы открываются Блокнотом или более удобным для вас текстовым редактором (но не Word-ом). Строки локализации начинаются с
201-й строки в файле. Обращение к строке в ходе работы меню происходит вызовом функции COM_Localize(номер строки). например, COM_Localize(16) выдаёт "CHOOSE A LEVEL"
для английского языка (216 строка файла, за вычетом 200 строк до фактического начала таблицы strings_en) и соответственно "ВЫБОР УРОВНЯ" из таблицы strings_ru).<p>
Для ориентирования в файлах Си и поиска взаимосвязей, функций и слов советуем использовать файловый менеджер Far, Total Commander и им подобные, обладающие функцией поиска по словам.
Так вам легче будет понять структуру файлов. Исследуйте функции, постарайтесь понять их назначение и поищите их упоминания в пределах всей папки code, чтобы получить
общую картину того, как код взаимодействует между собой.
Следите за пунктуацией в Си файлах! Ошибка в запятых, точках с запятыми и кавычках может привести к невозможности компиляции кода! Будьте внимательны и чаще делайте
резервные копии.<p>
<i>Многие (но не все) изменения и расширения кода, сделанные нами для Хитросплетённого мира, помечены комментарием с меткой <b>Mix3r_Durachok</b></i> c некоторыми описаниями прямо в коде.<p>
Графические и другие шаблоны расположены в папке work_templates.<p>
mashupdimensions-sdk-qvm\linux_scripts                             <br>
mashupdimensions-sdk-qvm\text<br>
mashupdimensions-sdk-qvm\ui<br>
Эти папки нужны для компиляции и неактивного кода Team Arena. Не используются непосредственно, но лучше их не удалять.
Скрипты для непосредственного процесса компиляции (превращение кода Си в исполняемые движком игры .qvm файлы) находятся внутри папки windows_scripts
<p><b>Сбор (компиляция).</b><p><a name="build"></a>
Для использования кода в игре, его из файлов Си требуется воплотить в виде qvm модулей. Для этого предназначены .bat сценарии в папке windows_scripts<br>
windows_compile_cgame.bat - создаст модуль клиента cgame.qvm<br>
windows_compile_game.bat - создаст модуль сервера game.qvm<br>
windows_compile_ui.bat - создаст модуль интерфейса ui.qvm<br>
Созданные модули размещаются в папку windows\base\vm<p>
Для подключения .qvm модулей к игре потребуется упаковать модули в .pk3 файл. Pk3 - это обычный .zip архив, из которого игра загружает ресурсы. Данные из нескольких .pk3 берутся
в алфавитном порядке, по принципу "первый с конца очереди". То есть, если имеется файл textures/brick/brick.jpg в архиве b0.pk3 и такой же файл есть в b1.pk3, то будет
использован файл из b1.pk3  Поэтому архив с важными файлами лучше пусть будет последним в алфавитной очереди архивов .pk3 .<p>
Для подготовки .pk3 файла с модулями мы приготовили .bat сценарий windows_pk3_qvm_only.cmd<br>
Запустите его и следуйте инструкциям. После работы сценария можно забрать файл upak1_test.pk3 из появившейся папки DATA_DEPLOY_THIS. Разместите его в папке с другими
.pk3 файлами в папке вашей игры, чтобы проверить работоспособность. Если появилось меню из квадратов - всё работает, но шрифта нет.<p>
Для полной сборки .pk3 комплекта нужно запускать windows_pk3_compile_and_deploy.cmd который сначала запустит предыдущий сценарий windows_pk3_qvm_only.cmd а затем
упакует все данные, расположенные в папке data_to_include_upak0 и создаст upak0.pk3 и upak1_test.pk3 в папке DATA_DEPLOY_THIS. Этот набор файлов является
наполнением и функциональной основой вашей игры, и называется игровым модулем (mod), подключаемым к движку командой fs_game название модуля. Для базового модуля
движка команда fs_game не нужна - движок в первую очередь всегда туда обращается (например, папка baseq3 в Quake 3, baseoa в Open Arena).<p>
Мы включили в папку data_to_include_upak0 текстуру и шейдер символьной карты. Благодаря этому, если запустить windows_pk3_compile_and_deploy.cmd, дождаться
окончания работы сценария, и поместить .pk3 файлы из DATA_DEPLOY_THIS в движок, то запустится пустой скелет игры - меню без графики и файлов. Можно положить их
в папку baseoa или baseq3 (внутри папки Quake 3 или Open Arena) - будет ещё интереснее. То есть, можно приступать к исследованиям, экспериментам и модификациям, к
созданию своего проекта.
.<p>
Движок на основе q3e будет доступен позже. Желаем успехов в творчестве.
</div>
</body>
</html>
